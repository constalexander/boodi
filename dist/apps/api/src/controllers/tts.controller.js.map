{
  "version": 3,
  "sources": ["../../../../../apps/api/src/controllers/tts.controller.ts"],
  "sourcesContent": ["import fs from 'fs';\nimport path from 'path';\nimport { NextFunction, Request, Response } from 'express';\nimport { Stream } from 'openai/streaming.mjs';\nimport { ChatCompletionChunk } from 'openai/resources/index.mjs';\nimport config from '../configs/app.config.js';\nimport { saveInteraction } from '../services/supabase.service.js';\nimport { ai, getStreamingCompletion } from '../services/openai.service.js';\n\nexport const tts = async (req: Request, res: Response, next: NextFunction) => {\n  //return; // wip\n  const speechFile = path.resolve('./speech.mp3');\n\n  async function main() {\n    const mp3 = await (ai.audio as any).speech.create({\n      model: 'tts-1-hd',\n      voice: 'onyx',\n      input: `Take. Rest. Take. Rest.`,\n    });\n    console.log(speechFile);\n    const buffer = Buffer.from(await mp3.arrayBuffer());\n    await fs.promises.writeFile(speechFile, buffer);\n  }\n  main();\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAe;AACf,kBAAiB;AAMjB,4BAA2C;AAEpC,MAAM,MAAM,OAAO,KAAc,KAAe,SAAuB;AAE5E,QAAM,aAAa,YAAAA,QAAK,QAAQ,cAAc;AAE9C,iBAAe,OAAO;AACpB,UAAM,MAAM,MAAO,yBAAG,MAAc,OAAO,OAAO;AAAA,MAChD,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,IACT,CAAC;AACD,YAAQ,IAAI,UAAU;AACtB,UAAM,SAAS,OAAO,KAAK,MAAM,IAAI,YAAY,CAAC;AAClD,UAAM,UAAAC,QAAG,SAAS,UAAU,YAAY,MAAM;AAAA,EAChD;AACA,OAAK;AACP;",
  "names": ["path", "fs"]
}
